<script>
// Функция за показване на секции
function showSection(sectionId) {
    const sections = document.querySelectorAll("section");
    sections.forEach(section => section.classList.remove("active-section"));
    document.getElementById(sectionId).classList.add("active-section");
}

// Функция за извикване на Spoonacular API и показване на рецепти
async function fetchAdditionalRecipes() {
    // Използваме proxy URL за по-добра сигурност
    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const apiUrl = 'https://api.spoonacular.com/recipes/complexSearch';
    const apiKey = process.env.SPOONACULAR_API_KEY || 'YOUR_API_KEY'; // Заменете с вашия API ключ в .env файла

    try {
        // Използваме proxy за да избегнем CORS проблеми и да скрием API ключа
        const response = await fetch(`${proxyUrl}${encodeURIComponent(apiUrl)}?apiKey=${apiKey}&number=3`);
        const data = await response.json();
        const recipesContainer = document.getElementById('additional-recipes');
        
        if (!data.results || data.results.length === 0) {
            recipesContainer.innerHTML = '<p>Няма намерени рецепти. Моля, опитайте по-късно.</p>';
            return;
        }

        data.results.forEach(recipe => {
            const recipeDiv = document.createElement('div');
            recipeDiv.classList.add('recipe');
            recipeDiv.innerHTML = `
                <h3>${recipe.title}</h3>
                <img src="${recipe.image}" alt="${recipe.title}" onerror="this.src='images/placeholder.jpg'">
                <ul>
                    <li><strong>Съставки:</strong> За подробности посетете <a href="${recipe.sourceUrl}" target="_blank" rel="noopener noreferrer">рецептата</a></li>
                </ul>
            `;
            recipesContainer.appendChild(recipeDiv);
        });
    } catch (error) {
        console.error('Грешка при зареждане на рецепти:', error);
        document.getElementById('additional-recipes').innerHTML = 
            '<p>Възникна проблем при зареждането на рецепти. Моля, опитайте по-късно.</p>';
    }
}

// Зареждаме допълнителните рецепти при зареждане на страницата
window.onload = fetchAdditionalRecipes;
</script> 